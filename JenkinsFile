pipeline{
    agent any
    tools {
      maven 'MVN_HOME'
    }
	
	environment {
        // Credential defined in Jenkins
        DOCKER_CREDENTIALS = credentials('docker-hub-pass')
    }


   stages{
    stage('Maven Build') {
        steps {
            echo 'Trigger a maven build'
            sh "mvn clean package"
        }
    }
       
    stage('Docker Build'){
        steps{
            echo 'Build brianbudowick/devopsfinal'
            sh "docker build -t brianbudowick/devopsfinal . "
            }
        }
        
      stage('DockerHub Push'){
            steps{
                echo 'You should first login to your github account using the withCredentials synatx'
                echo 'And for that you need to create the appropriate credentials to access the github account in Jenkins'
                echo 'Then you need to push this image to the public registry dockerhub into your account'
                echo 'Use the docker push command'
            }
        }
  
      stage('Docker Deploy'){
            steps{
                echo 'You should use the ansiblePlaybook syntax in order to call your playbook'
                echo 'But before that you need to create an agent in order to execute the playbook on the Ansible controle node machine'
            }
        }        
    }
    
}
